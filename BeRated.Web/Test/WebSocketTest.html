<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>WebSocket test</title>
</head>
<body>
	<script>
	function runTest() {
		var url = 'ws://127.0.0.1:1337/';
		console.log('Connecting');
		var socket = new WebSocket(url);
		
		function call(method) {
			var callArguments = [];
			for(var i = 1; i < arguments.length; i++) {
				var argument = arguments[i];
				callArguments.push(argument);
			}
			var call = {
				id: 0,
				method: method,
				arguments: callArguments
			};
			var message = JSON.stringify(call);
			socket.send(message);
		}
		
		socket.onopen = function() {
			console.log('Connected');
			call('getAllPlayerStats');
			call('getPlayerWeaponStats', 10);
		};
		
		socket.onmessage = function(event) {
			var result = JSON.parse(event.data);
			console.log(result);
		};
		
		socket.onclose = function() {
			console.log('Disconnected');
		};
	}
	runTest();
	</script>
</body>
</html>